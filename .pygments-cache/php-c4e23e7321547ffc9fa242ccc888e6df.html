<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">namespace</span> <span class="nx">Friparia\Assetcompresser</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">Assetcompresser</span><span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * Minifies css files</span>
<span class="sd">     * @param  string  $path  input css file</span>
<span class="sd">     * @return string         compressed string</span>
<span class="sd">     */</span>
    <span class="k">static</span> <span class="k">public</span> <span class="k">function</span> <span class="nf">minifycss</span><span class="p">(</span><span class="nv">$path</span><span class="p">){</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$path</span><span class="p">)){</span>
            <span class="k">if</span><span class="p">(</span><span class="nv">$contents</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$path</span><span class="p">)){</span>
                <span class="nv">$contents</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nv">$contents</span><span class="p">);</span>
                <span class="nv">$contents</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$contents</span><span class="p">);</span>
                <span class="nv">$search</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;/\/\*[\d\D]*?\*\/|</span><span class="se">\t</span><span class="s2">+/&quot;</span><span class="p">,</span> <span class="s2">&quot;/\s+/&quot;</span><span class="p">,</span> <span class="s2">&quot;/\}\s+/&quot;</span><span class="p">);</span>
                <span class="nv">$replace</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="k">null</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
                <span class="nv">$contents</span> <span class="o">=</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="nv">$search</span><span class="p">,</span> <span class="nv">$replace</span><span class="p">,</span> <span class="nv">$contents</span><span class="p">);</span>
                <span class="nv">$search</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;/</span><span class="se">\\</span><span class="s2">;\s/&quot;</span><span class="p">,</span> <span class="s2">&quot;/\s+\{\\s+/&quot;</span><span class="p">,</span> <span class="s2">&quot;/</span><span class="se">\\</span><span class="s2">:\s+</span><span class="se">\\</span><span class="s2">#/&quot;</span><span class="p">,</span> <span class="s2">&quot;/,\s+/i&quot;</span><span class="p">,</span> <span class="s2">&quot;/</span><span class="se">\\</span><span class="s2">:\s+</span><span class="se">\\</span><span class="s2">\&#39;/i&quot;</span><span class="p">,</span> <span class="s2">&quot;/</span><span class="se">\\</span><span class="s2">:\s+([0-9]+|[A-F]+)/i&quot;</span><span class="p">);</span>
                <span class="nv">$replace</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;:#&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;:\&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;:$1&quot;</span><span class="p">);</span>
                <span class="nv">$contents</span> <span class="o">=</span> <span class="nb">preg_replace</span><span class="p">(</span><span class="nv">$search</span><span class="p">,</span> <span class="nv">$replace</span><span class="p">,</span> <span class="nv">$contents</span><span class="p">);</span>
                <span class="nv">$contents</span> <span class="o">=</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$contents</span><span class="p">);</span>
                <span class="k">return</span> <span class="nv">$contents</span><span class="p">;</span>  
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
            <span class="p">}</span>

        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>